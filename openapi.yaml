openapi: 3.0.0
info:
  title: Datti API
  version: 1.0.0
  description: 誰にいくら払ったっけ？を記録するサービス
tags:
  - name: Banks
  - name: Users
  - name: Friends
  - name: Groups
  - name: Events
paths:
  /bank:
    get:
      tags:
        - Banks
      operationId: Banks_getMyBank
      summary: 口座情報の取得
      description: 登録されている口座情報の取得
      parameters: []
      responses:
        '200':
          description: 200レスポンス
          content:
            application/json:
              schema:
                type: object
                required:
                  - bankCode
                  - branchCode
                  - accountCode
                  - createdAt
                  - updatedAt
                  - deletedAt
                properties:
                  bankCode:
                    type: string
                    minLength: 4
                    maxLength: 4
                    description: 金融機関コード
                  branchCode:
                    type: string
                    minLength: 3
                    maxLength: 3
                    description: 支店番号
                  accountCode:
                    type: string
                    minLength: 7
                    maxLength: 7
                    description: 口座番号
                  createdAt:
                    type: string
                    format: date-time
                    description: 作成時間
                  updatedAt:
                    type: string
                    format: date-time
                    description: 更新時間
                  deletedAt:
                    type: string
                    format: date-time
                    nullable: true
                    description: |-
                      削除時間
                      論理削除されていない場合はnull
                description: 正常完了時、レコードを返す場合のボディ
        '401':
          description: 401エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
        '500':
          description: 500エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
    post:
      tags:
        - Banks
      operationId: Banks_createMyBank
      summary: 口座情報の登録・更新
      description: 口座情報の登録・更新
      parameters: []
      responses:
        '201':
          description: 201レスポンス
          content:
            application/json:
              schema:
                type: object
                required:
                  - bankCode
                  - branchCode
                  - accountCode
                  - createdAt
                  - updatedAt
                  - deletedAt
                properties:
                  bankCode:
                    type: string
                    minLength: 4
                    maxLength: 4
                    description: 金融機関コード
                  branchCode:
                    type: string
                    minLength: 3
                    maxLength: 3
                    description: 支店番号
                  accountCode:
                    type: string
                    minLength: 7
                    maxLength: 7
                    description: 口座番号
                  createdAt:
                    type: string
                    format: date-time
                    description: 作成時間
                  updatedAt:
                    type: string
                    format: date-time
                    description: 更新時間
                  deletedAt:
                    type: string
                    format: date-time
                    nullable: true
                    description: |-
                      削除時間
                      論理削除されていない場合はnull
                description: 正常完了時、レコードを返す場合のボディ
        '401':
          description: 401エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
        '500':
          description: 500エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Bank'
    delete:
      tags:
        - Banks
      operationId: Banks_deleteMyBank
      summary: 口座情報の削除
      description: 登録されている口座情報の削除
      parameters: []
      responses:
        '200':
          description: 200レスポンス
          content:
            application/json:
              schema:
                type: object
                required:
                  - bankCode
                  - branchCode
                  - accountCode
                  - createdAt
                  - updatedAt
                  - deletedAt
                properties:
                  bankCode:
                    type: string
                    minLength: 4
                    maxLength: 4
                    description: 金融機関コード
                  branchCode:
                    type: string
                    minLength: 3
                    maxLength: 3
                    description: 支店番号
                  accountCode:
                    type: string
                    minLength: 7
                    maxLength: 7
                    description: 口座番号
                  createdAt:
                    type: string
                    format: date-time
                    description: 作成時間
                  updatedAt:
                    type: string
                    format: date-time
                    description: 更新時間
                  deletedAt:
                    type: string
                    format: date-time
                    nullable: true
                    description: |-
                      削除時間
                      論理削除されていない場合はnull
                description: 正常完了時、レコードを返す場合のボディ
        '401':
          description: 401エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
        '500':
          description: 500エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
  /friends:
    get:
      tags:
        - Friends
      operationId: Friends_getFriend
      summary: フレンドのユーザーを取得
      description: フレンドのユーザーを取得
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserList'
        '401':
          description: 401エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
        '500':
          description: 500エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
  /friends/pendings:
    get:
      tags:
        - Friends
      operationId: Friends_getPendingFriendRequest
      summary: フレンド申請未承認のユーザーを取得
      description: フレンド申請未承認のユーザーを取得
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserList'
        '401':
          description: 401エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
        '500':
          description: 500エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
  /friends/requests:
    get:
      tags:
        - Friends
      operationId: Friends_getFriendRequest
      summary: フレンド申請中のユーザーを取得
      description: フレンド申請中のユーザーを取得
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserList'
        '401':
          description: 401エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
        '500':
          description: 500エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
  /friends/{uid}:
    delete:
      tags:
        - Friends
      operationId: Friends_unRegisterFriend
      summary: フレンドの登録解除
      description: フレンドの登録解除
      parameters:
        - name: uid
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 200レスポンス
          content:
            application/json:
              schema:
                type: object
                required:
                  - message
                properties:
                  message:
                    type: string
                description: 正常完了時、メッセージのみを返す場合のボディ
        '401':
          description: 401エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
        '500':
          description: 500エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
  /groups:
    get:
      tags:
        - Groups
      operationId: Groups_getGroups
      summary: 所属しているグループ情報の取得
      description: 所属しているグループの取得
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupList'
        '401':
          description: 401エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
        '500':
          description: 500エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
    post:
      tags:
        - Groups
      operationId: Groups_postGroup
      summary: グループの作成
      description: グループの作成
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupUsers'
        '401':
          description: 401エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
        '500':
          description: 500エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GroupCreateRequest'
  /groups/{gid}/events:
    get:
      tags:
        - Events
      operationId: Events_getEventsByGid
      summary: グループIDに紐づくイベント情報の取得
      description: グループIDに紐づくイベント情報の取得
      parameters:
        - name: gid
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EventList'
        '401':
          description: 401エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
        '500':
          description: 500エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
    post:
      tags:
        - Events
      operationId: Events_createEvent
      summary: イベント情報の登録
      description: イベント情報の登録
      parameters:
        - name: gid
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
        '401':
          description: 401エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
        '500':
          description: 500エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EventCreate'
  /groups/{gid}/events/{id}:
    get:
      tags:
        - Events
      operationId: Events_getEvent
      summary: イベントIDに紐づくイベント情報の取得
      description: 登録されているイベント情報の取得
      parameters:
        - name: gid
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
        '401':
          description: 401エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
        '500':
          description: 500エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
    put:
      tags:
        - Events
      operationId: Events_updateEvent
      summary: イベント情報の更新
      description: イベント情報の更新
      parameters:
        - name: gid
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
        '401':
          description: 401エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
        '500':
          description: 500エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EventUpdate'
    delete:
      tags:
        - Events
      operationId: Events_deleteEvent
      summary: イベント情報の削除
      description: イベント情報の削除
      parameters:
        - name: gid
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 200レスポンス
          content:
            application/json:
              schema:
                type: object
                required:
                  - message
                properties:
                  message:
                    type: string
                description: 正常完了時、メッセージのみを返す場合のボディ
        '401':
          description: 401エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
        '500':
          description: 500エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
  /groups/{id}:
    get:
      tags:
        - Groups
      operationId: Groups_getGroup
      summary: グループ情報の取得
      description: グループ情報の取得
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupUsers'
        '401':
          description: 401エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
        '500':
          description: 500エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
    put:
      tags:
        - Groups
      operationId: Groups_putGroup
      summary: グループ情報の更新
      description: グループ情報の更新
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupUsers'
        '401':
          description: 401エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
        '500':
          description: 500エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GroupUpdateRequest'
  /groups/{id}/members:
    post:
      tags:
        - Groups
      operationId: Groups_registedUsers
      summary: グループに対するメンバーの招待
      description: グループに対するメンバーの追加
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GroupUsers'
        '401':
          description: 401エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
        '500':
          description: 500エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Members'
  /users:
    get:
      tags:
        - Users
      operationId: Users_getUserByEmail
      summary: メールアドレスによるユーザー情報の取得
      description: メールアドレスによるユーザー情報の取得
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserList'
        '401':
          description: 401エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
        '500':
          description: 500エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserGetRequest'
  /users/me:
    get:
      tags:
        - Users
      operationId: Users_getMe
      summary: ユーザー情報（自分）の取得
      description: ユーザー情報の取得
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          description: 401エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
        '500':
          description: 500エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
    put:
      tags:
        - Users
      operationId: Users_updateMe
      summary: ユーザー情報（自分）の更新
      description: ユーザー情報の更新
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          description: 401エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
        '500':
          description: 500エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserUpdateRequest'
  /users/{uid}:
    get:
      tags:
        - Users
      operationId: Users_getUserByUid
      summary: UIDによるユーザー情報の取得
      description: プロフィール情報の取得
      parameters:
        - name: uid
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          description: 401エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
        '500':
          description: 500エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
  /users/{uid}/requests:
    post:
      tags:
        - Users
      operationId: Users_friendRequest
      summary: フレンド申請の送信
      description: フレンド申請の送信
      parameters:
        - name: uid
          in: path
          required: true
          schema:
            type: string
      responses:
        '201':
          description: 201レスポンス
          content:
            application/json:
              schema:
                type: object
                required:
                  - message
                properties:
                  message:
                    type: string
                description: 正常完了時、メッセージのみを返す場合のボディ
        '401':
          description: 401エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
        '500':
          description: 500エラー
          content:
            application/json:
              schema:
                type: object
                required:
                  - error
                properties:
                  error:
                    type: string
                description: エラーレスポンスのボディ
security:
  - BearerAuth: []
components:
  schemas:
    Bank:
      type: object
      required:
        - bankCode
        - branchCode
        - accountCode
      properties:
        bankCode:
          type: string
          minLength: 4
          maxLength: 4
          description: 金融機関コード
        branchCode:
          type: string
          minLength: 3
          maxLength: 3
          description: 支店番号
        accountCode:
          type: string
          minLength: 7
          maxLength: 7
          description: 口座番号
    Event:
      type: object
      required:
        - id
        - name
        - evented_at
        - created_by
        - group_id
      properties:
        id:
          type: string
          description: イベントID
        name:
          type: string
          description: イベント名
        evented_at:
          type: string
          format: date-time
          description: イベントの日付
        created_by:
          allOf:
            - $ref: '#/components/schemas/User'
          description: イベント作成者のユーザー情報
        group_id:
          type: string
          description: イベントの紐づいたグループID
    EventCreate:
      type: object
      required:
        - name
        - evented_at
      properties:
        name:
          type: string
          description: イベント名
        evented_at:
          type: string
          format: date-time
          description: イベントの日付
    EventList:
      type: object
      required:
        - events
      properties:
        events:
          type: array
          items:
            $ref: '#/components/schemas/Event'
    EventUpdate:
      type: object
      required:
        - name
        - evented_at
      properties:
        name:
          type: string
          description: イベント名
        evented_at:
          type: string
          format: date-time
          description: イベントの日付
    Group:
      type: object
      required:
        - id
        - name
      properties:
        id:
          type: string
          description: グループID
        name:
          type: string
          description: グループ名
    GroupCreateRequest:
      type: object
      required:
        - name
        - uids
      properties:
        name:
          type: string
          description: グループ名
        uids:
          type: array
          items:
            type: string
          description: UID
    GroupList:
      type: object
      required:
        - groups
      properties:
        groups:
          type: array
          items:
            $ref: '#/components/schemas/Group'
          description: グループ
    GroupUpdateRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          description: グループ名
    GroupUsers:
      type: object
      required:
        - id
        - name
        - users
      properties:
        id:
          type: string
          description: グループID
        name:
          type: string
          description: グループ名
        users:
          type: array
          items:
            $ref: '#/components/schemas/User'
          description: ユーザー情報
    Members:
      type: object
      required:
        - uids
      properties:
        uids:
          type: array
          items:
            type: string
          description: UID
    User:
      type: object
      required:
        - uid
        - name
        - email
        - photoUrl
      properties:
        uid:
          type: string
          minLength: 28
          maxLength: 28
          description: ユーザーID
        name:
          type: string
          description: ユーザー名
        email:
          type: string
          description: メールアドレス
        photoUrl:
          type: string
          description: 画像URL
    UserGetRequest:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          description: メールアドレス
    UserList:
      type: object
      required:
        - users
      properties:
        users:
          type: array
          items:
            $ref: '#/components/schemas/User'
    UserUpdateRequest:
      type: object
      required:
        - name
        - photoUrl
      properties:
        name:
          type: string
          description: ユーザー名
        photoUrl:
          type: string
          description: 画像URL
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
servers:
  - url: https://datti-api-dev.fly.dev
    description: 開発環境
    variables: {}
  - url: https://datti-api.haebeal.net
    description: 本番環境
    variables: {}
